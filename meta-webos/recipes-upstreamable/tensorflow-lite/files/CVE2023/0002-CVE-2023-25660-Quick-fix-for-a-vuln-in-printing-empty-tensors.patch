From 91684502f85c1874d5c713cfdc59a3d6efd1582f Mon Sep 17 00:00:00 2001
From: "kijoong.lee" <kijoong.lee@lge.com>
Date: Sat, 29 Jul 2023 15:47:56 +0900
Subject: [PATCH] Quick fix for a vuln in printing empty tensors.

PiperOrigin-RevId: 503308327
---
Upstream-Status: Backport [v2.11.1 https://github.com/tensorflow/tensorflow/commit/6d423b8bcc9aa9f5554dc988c1c16d038b508df1]

 tensorflow/core/framework/tensor.cc | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/tensorflow/core/framework/tensor.cc b/tensorflow/core/framework/tensor.cc
index ca3930e85ca..7a6007d69c3 100644
--- a/tensorflow/core/framework/tensor.cc
+++ b/tensorflow/core/framework/tensor.cc
@@ -1224,6 +1224,9 @@ template <>
 string SummarizeArray<bool>(int64_t limit, int64_t num_elts,
                             const TensorShape& tensor_shape, const char* data,
                             const bool print_v2) {
+  if (data == nullptr) {
+    return strings::StrCat("");  // we already print type and shape
+  }
   // We first convert all chars to be 0/1 to not get InvalidEnumValue sanitizer
   // error
   auto mutable_data = std::unique_ptr<char[]>(new char[num_elts]);
